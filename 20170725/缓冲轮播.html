<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
		*{
			margin: 0;
			padding: 0;
			list-style: none;
			text-decoration: none;
		}
			div{
				width: 490px;
				height: 170px;
				overflow: hidden;
				margin: 100px auto;
				position: relative;
			}
			div ul{
				width: 400%;
				position: relative;
			}
			div ul li{
				float: left;
			}
			div ol{
				position: absolute;
				bottom: 10px;
				left: 50%;
				margin-left: -47.5px;
			}
			div ol li{
				float: left;
				width: 20px;
				height: 20px;
				background: wheat;
				text-align: center;
			}
			div ol li+li{
				margin-left: 5px;
			}
			.cur{
				background: #00BFFF;
			}
			a{
				display: block;
				position: absolute;
				width: 20px;
				height: 40px;
				background: lightskyblue;
				opacity: .8;
				line-height: 40px;
			}
			#a1{
				top: 40%;
				left: 0px;
			}
			#a2{
				top: 40%;
				right: 0px;
			}	
		</style>
	</head>
	<body>
		<div>
			<ul id="ul">
				<li><img src="img/01-y.jpg"/></li>
				<li><img src="img/02-y.jpg"/></li>
				<li><img src="img/03-y.jpg"/></li>
				<li><img src="img/04-y.jpg"/></li>
			</ul>
			<ol id="ol">
				<li class="cur">1</li>
				<li>2</li>
				<li>3</li>
				<li>4</li>
			</ol>
			<a href="#" id="a1" onclick="next()">左</a>
			<a href="#" id="a2" onclick="up()">右</a>
			<script type="text/javascript">
				var oUl=document.getElementById("ul");
				var oOl=document.getElementById("ol");
				var a1=document.getElementById("a1");
				var a2=document.getElementById("a2");
				var aLi=oOl.children;var timer=null,timer1=null;var iTarger=0;var num=0;
				for(var i=0;i<aLi.length;i++){
					aLi[i].index=i;
					aLi[i].onclick=function(){
						for(var i=0;i<aLi.length;i++){
							aLi[i].className=" ";
						}
						this.className="cur";
						iTarger=-490 * this.index;
						num=this.index;
						
					}
				}

				//缓冲
				function fn(){
				clearInterval(timer);
				timer=setInterval(function(){
					speed=(iTarger - oUl.offsetLeft) /10;
					speed=speed > 0 ? Math.ceil(speed) : Math.floor(speed);
					oUl.style.left=oUl.offsetLeft+speed+"px";
				},30)
			}
				fn()
				//轮播
			function next(){
						num=++num % aLi.length;
						console.log(num)
						for(var i=0;i<aLi.length;i++){
							aLi[i].className=" ";
						}
						aLi[num].className="cur";
						iTarger=num*-490;
						fn()
					}
			function up(){
						num--;
						if(num<=-1){
							num=aLi.length-1
						}
						console.log(num)
						for(var i=0;i<aLi.length;i++){
							aLi[i].className=" ";
						}
						aLi[num].className="cur";
						iTarger=num*-490;
						fn()
					}

		var timer1=null;  //轮播
		function autoplay(){
			clearInterval(timer1)
			timer1=setInterval(function(){
				next()
			},3000)
		}
		autoplay()	
					
			</script>
		</div>
	</body>
</html>
